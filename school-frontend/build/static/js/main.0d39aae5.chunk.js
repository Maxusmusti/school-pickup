(this["webpackJsonpschool-todo"]=this["webpackJsonpschool-todo"]||[]).push([[0],[,function(e,t){e.exports={makePOST:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=e;fetch(o,{method:"POST",headers:n,body:t}).then((function(e){return e.ok||a?e.json():{}})).then((function(e){r(e)}))},makeGET:function(e,t,n){fetch(e).then((function(e){return e.ok||n?e.json():{}})).then((function(e){return t(e)}))}}},,,,function(e,t,n){e.exports=n(12)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(4),i=n.n(o),c=(n(10),n(2)),s=(n(11),n(1)),l=function(e){Object(s.makeGET)("https://school-pickup.herokuapp.com/api/getlist",(function(t){var n=function(e){if(!e)return[];for(var t=function(e){return{time:e[0],phone:e[1],parentFirst:e[2],parentLast:e[3],childFirst:e[4],childLast:e[5],grade:e[6],message:e[7]}},n={},r=function(e){if(e.startsWith("TOD"))return"Toddler";if(e.startsWith("INF"))return"Infant";if(e.startsWith("OLD INF")||e.startsWith("OLDINF"))return"Older Infant";if(e.startsWith("PRE 3")||e.startsWith("PRE3"))return"Preschool 3";if(e.startsWith("EPRE")||e.startsWith("PRE 4")||e.startsWith("PRE4")||e.startsWith("EK"))return"Preschool 4 / EK";switch(e){case"K":case"01":case"02":case"03":case"04":case"05":case"06":case"07":case"08":return"K-8";default:return"Other"}},a=0;a<e.length;a++){var o=t(e[a]),i=r(o.grade);Array.isArray(n[i])?n[i].push(o):n[i]=[o]}return n}(t);e(n)}))},u=function(e){var t=e.items.map((function(t,n){return a.a.createElement(a.a.Fragment,null,a.a.createElement(m,{key:n,item:t,index:n,parent:e.parent,removeItem:e.removeItem,markTodoDone:e.markTodoDone}),a.a.createElement("hr",null))}));return a.a.createElement("ul",{className:"list-group"}," ",t," ")},m=function(e){var t,n=e.item.done?"done":"undone";return a.a.createElement("li",{className:"list-group-item "},a.a.createElement("div",{className:n,onClick:function(){e.markTodoDone(e.item.phone,e.item.childFirst,e.item.childLast,e.index,e.parent)}},a.a.createElement("p",null,"".concat(e.item.parentFirst," ").concat(e.item.parentLast," picking up")," ",a.a.createElement("b",{style:{color:"#FFFFFF"}},"".concat(e.item.childFirst," ").concat(e.item.childLast))," in grade ".concat(e.item.grade)),a.a.createElement("p",null,"".concat(e.item.message)),a.a.createElement("p",null,"".concat(e.item.phone," || ").concat((t=e.item.time,new Date(Date.parse(t)).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}))))))},h=function(e){return a.a.createElement("h1",{style:{marginBottom:"8vh",textAlign:"center"}},"School Pick Up: ",function(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),r=e.getFullYear();return e=n+"/"+t+"/"+r}())},d=function(){var e=Object(r.useState)({}),t=Object(c.a)(e,2),n=t[0],o=t[1],i=Object(r.useState)(!0),m=Object(c.a)(i,2),d=m[0],f=m[1];Object(r.useEffect)((function(){var e=function(){l((function(e){f(!1),o(e)}))};e();var t=setInterval((function(){return e()}),1e4);return function(){clearInterval(t)}}),[]);var p=function(e,t,r,a,i){if(window.confirm("Are you sure that you want to mark this entry as completed?")){f(!0);var c=n;!function(e,t,n,r){Object(s.makePOST)("https://school-pickup.herokuapp.com/api/done",JSON.stringify({phone:e,childFirst:t,childLast:n}),{"Content-Type":"application/json"},(function(e){console.log(e);var t=e.status;r(t)}))}(e,t,r,(function(e){if(!1===e)f(!1),alert("Failed to mark this student as picked up! Please try again later");else{var t=c[i][a];c[i].splice(a,1),t.done=!t.done,t.done?c[i].push(t):c[i].unshift(t),f(!1),o(c)}}))}};if(d)return a.a.createElement("span",null,"Loading...");var g={Infant:0,"Older Infant":1,Toddler:2,"Preschool 3":3,"Preschool 4 / EK":4,"K-8":5,Other:6};return a.a.createElement("div",{id:"main"},a.a.createElement(h,null),a.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},Object.keys(n).sort((function(e,t){return g[n[e].grade]-g[n[t].grade]})).map((function(e){return a.a.createElement("div",{style:{flex:1}},a.a.createElement("h3",{style:{textAlign:"center",marginBottom:"4vh"}},e),a.a.createElement(u,{items:n[e],parent:e,markTodoDone:p}))}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(d,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[5,1,2]]]);
//# sourceMappingURL=main.0d39aae5.chunk.js.map